<form {{on "submit" this.submit}} ...attributes>
  <div class="flex flex-row items-stretch mt-4">
    <div class="flex flex-col mr-5 w-1/2">
      <Ui::Input
        id="name"
        @name="name"
        @label="Nom"
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @placeholder={{if (eq @popupType "details") "" "Nom de l'entreprise"}}
        @mandatory={{true}}
        @changeset={{@changeset}}
        @validationField="name"
        @updateValue={{fn this.changeInput "name"}}
        @value={{changeset-get @changeset "name"}}
        @disabled={{if (eq @popupType "details") true false}}
        @hasError={{(get @changeset.error "name")}}
        required
        autocapitalize="on"
        type="text"
        data-test-input="name"
      >
        <div class={{if (get @changeset.error "emailAddress") " h-6"}}>
          {{#let (get @changeset.error "name") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le champ nom doit être complété
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="enterpriseNumber"
        @label="N° d'entreprise"
        @name="enterpriseNumber"
        @value={{changeset-get @changeset "enterpriseNumber"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "enterpriseNumber"}}
        @placeholder={{if (eq @popupType "details") "" "0123456789"}}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{false}}
        @hasError={{(get @changeset.error "enterpriseNumber")}}
        type="text"
        data-test-input="enterpriseNumber"
      >
        <div class={{if (get @changeset.error "emailAddress2") " h-6"}}>
          {{#let (get @changeset.error "enterpriseNumber") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le N° d'entreprise doit être un N° d'entreprise européen
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="vatNumber"
        @label="N° de TVA"
        @name="vatNumber"
        @value={{changeset-get @changeset "vatNumber"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "vatNumber"}}
        @placeholder={{if (eq @popupType "details") "" "BE0123456789"}}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{false}}
        @hasError={{(get @changeset.error "vatNumber")}}
        type="text"
        data-test-input="vatNumber"
      >
        <div class={{if (get @changeset.error "phoneNumber") " h-6"}}>
          {{#let (get @changeset.error "vatNumber") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le N° de TVA doit être un N° de TVA européen
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="city"
        @label="Ville"
        @name="city"
        @value={{changeset-get @changeset "city"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "city"}}
        @placeholder={{if (eq @popupType "details") "" "Mons"}}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{true}}
        @hasError={{(get @changeset.error "city")}}
        required
        autocapitalize="on"
        type="text"
        data-test-input="city"
      >
        <div class={{if (get @changeset.error "phoneNumber2") " h-6"}}>
          {{#let (get @changeset.error "city") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le champ ville doit être complété
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
    </div>
    <div class="flex flex-col w-1/2">
      <Ui::Input
        id="emailAddress"
        @label="Adresse mail"
        @name="emailAddress"
        @value={{changeset-get @changeset "emailAddress"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "emailAddress"}}
        @placeholder={{if
          (eq @popupType "details")
          ""
          "Adresse mail de l'entreprise"
        }}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{true}}
        @hasError={{(get @changeset.error "emailAddress")}}
        required
        type="text"
        data-test-input="emailAddress"
      >
        <div class={{if (get @changeset.error "name") " h-6"}}>
          {{#let (get @changeset.error "emailAddress") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  L'adresse email doit être une adresse email valide
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="emailAddress2"
        @label="Adresse mail n°2"
        @name="emailAddress2"
        @value={{changeset-get @changeset "emailAddress2"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "emailAddress2"}}
        @placeholder={{if
          (eq @popupType "details")
          ""
          "2e adresse mail de l'entreprise"
        }}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{false}}
        @hasError={{(get @changeset.error "emailAddress2")}}
        type="text"
        data-test-input="emailAddress2"
      >
        <div class={{if (get @changeset.error "enterpriseNumber") " h-6"}}>
          {{#let (get @changeset.error "emailAddress2") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  L'adresse email N°2 doit être une adresse mail valide
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="phoneNumber"
        @label="N° de téléphone"
        @name="phoneNumber"
        @value={{changeset-get @changeset "phoneNumber"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "phoneNumber"}}
        @placeholder={{if
          (eq @popupType "details")
          ""
          "N° de téléphone de l'enterprise"
        }}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{true}}
        @hasError={{(get @changeset.error "phoneNumber")}}
        required
        type="text"
        data-test-input="phoneNumber"
      >
        <div class={{if (get @changeset.error "vatNumber") " h-6"}}>
          {{#let (get @changeset.error "phoneNumber") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le N° de téléphone doit être un N° de téléphone belge
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
      <Ui::Input
        id="phoneNumber2"
        @label="N° de téléphone n°2"
        @name="phoneNumber2"
        @value={{changeset-get @changeset "phoneNumber2"}}
        @containerStyle=""
        @labelStyle="text-textPrimary font-base mt-1 block"
        @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
          (eq @popupType "details")
          "border-textSecondary text-textSecondary"
          "border-textPrimary focus:border-navbarBg text-textPrimary"
        }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
        @updateValue={{fn this.changeInput "phoneNumber2"}}
        @placeholder={{if
          (eq @popupType "details")
          ""
          "2e n° de téléphone de l'entreprise"
        }}
        @disabled={{if (eq @popupType "details") true false}}
        @mandatory={{false}}
        @hasError={{(get @changeset.error "phoneNumber2")}}
        type="text"
        data-test-input="phoneNumber2"
      >
        <div class={{if (get @changeset.error "city") " h-6"}}>
          {{#let (get @changeset.error "phoneNumber2") as |error|}}
            {{#if error}}
              <ul class="list-disc list-inside text-warn">
                <li class="text-left pt-1 pl-1">
                  Le N° de téléphone N°2 doit être un N° de téléphone belge
                </li>
              </ul>
            {{else}}
            {{/if}}
          {{/let}}
        </div>
      </Ui::Input>
    </div>
  </div>
  <Ui::Input
    id="address"
    @label="Adresse"
    @name="address"
    @value={{changeset-get @changeset "address"}}
    @containerStyle=""
    @labelStyle="text-textPrimary font-base mt-1 block"
    @inputStyle="w-full rounded-md outline-none transition-all duration-200 border-2 {{if
      (eq @popupType "details")
      "border-textSecondary text-textSecondary"
      "border-textPrimary focus:border-navbarBg text-textPrimary"
    }} pt-1.5 pb-1.5 px-3 font-base focus:outline-none focus:ring-0"
    @updateValue={{fn this.changeInput "address"}}
    @placeholder={{if (eq @popupType "details") "" "Rue, numéro"}}
    @disabled={{if (eq @popupType "details") true false}}
    @mandatory={{true}}
    @hasError={{(get @changeset.error "address")}}
    required
    autocapitalize="on"
    type="text"
    data-test-input="address"
  >
    {{#let (get @changeset.error "address") as |error|}}
      {{#if error}}
        <ul class="list-disc list-inside text-warn">
          <li class="text-left pt-1 pl-1">
            Le champ adresse doit être complété
          </li>
        </ul>
      {{else}}
      {{/if}}
    {{/let}}
  </Ui::Input>
  {{#if (or (eq @popupType "new") (eq @popupType "edit"))}}
    <div>
      <div
        id="errorEnterpriseForm"
        class="text-warn text-sm w-max mx-auto mt-2"
      >
      </div>
      <button
        type="submit"
        class="block mt-3 text-center py-2 px-5 rounded-md bg-navbarBg text-white mx-auto cursor-pointer hover:bg-opacity-75 active:bg-opacity-25 active:text-navbarBg transition-all duration-200"
        disabled={{changeset-get @changeset "isInvalid"}}
        data-test-submit="saveEnterprise"
      >
        {{@popupName}}
      </button>
    </div>
  {{/if}}
</form>